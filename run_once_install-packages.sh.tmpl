#!/bin/sh

# Install Homebrew
if ! command -v brew &> /dev/null
then
    echo "brew could not be found, installing now"
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    exit
fi

{{ if eq .chezmoi.os "linux" -}}

sudo apt update
sudo apt install -y ack git grep htop tmux tree zsh
sudo apt upgrade

/home/linuxbrew/.linuxbrew/bin/brew install starship k9s go neovim

{{ else if eq .chezmoi.os "darwin" -}}

brew install ack chezmoi git git-delta grep htop mosh neovim starship tmux tree zsh

{{ end -}}

# Install TPM for tmux plugin management
if [ ! -d "$HOME/.tmux/plugins" ] 
    git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
fi

# Install fzf
if [ ! -d "$HOME/.fzf" ] 
then
    echo "fzf could not be found, installing now"
    git clone --depth 1 https://github.com/junegunn/fzf.git $HOME/.fzf
    $HOME/.fzf/install --bin
fi

# Install oh my zsh
if [ ! -d "$HOME/.oh-my-zsh" ] 
then
    echo "Oh-My-Zsh is not installed, installing now" 
    git clone https://github.com/ohmyzsh/ohmyzsh.git $HOME/.oh-my-zsh
    chsh -s $(which zsh)
fi
